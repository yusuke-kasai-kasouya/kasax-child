# README.ja.md (日本語)

# kasax_child : AI POST分析ユニット (Python Engine)

本ユニットは、創作支援システム『kasax_child』において、高度な自然言語処理（NLP）と機械学習による「知能化」を担う心臓部です。

## 概要

WordPress上の膨大な創作ノートを解析し、独自のアルゴリズムで「知識の完成度」をスコア化、およびベクトル化を行います。単なる記事の集合体を、構造化・数値化された「多層的知能ナレッジベース」へと昇華させます。

## 主な機能

### 1. 全体解析 (GA: Global Analysis)

* **TF-IDFによる重要語抽出**: GiNZA (Spacy) を用い、サイト全域から名詞を抽出。
* **統計的重み付け**: サイト全体における単語の希少性・重要度（`global_term_weights.json`）を定義し、スコアリングの基礎を作ります。

### 2. AI文脈評価 (KC: Knowledge Classification)

* **回帰モデルによる品質予測**: Ridge回帰モデルを用い、文脈から「知識としての完成度」を0.0〜5.0で予測します。
* **プレフィックス学習**: 人間が定義した分類（Μ, Β, γ, σ, δ）の傾向をAIが学習し、新しい記事に対しても「どの程度その分類にふさわしい内容か」を判定します。

### 3. 複合解析と標準化 (MX & Standardization)

* **統合スコアリング**: 記事の構造（タグ密度、文字数）とAIの予測値を組み合わせ、最終的な `ai_score` を算出します。
* **IQ基準の偏差値化**: 生のスコアを、平均100、標準偏差15の「IQスタイル」に変換。ナレッジの価値を直感的に把握可能にします。

### 4. ベクトル化 (Vectorizer)

* **意味の数値化**: ローカルLLMエンドポイント（LM Studio/Ollama等）と連携し、記事をベクトルデータに変換。
* **将来の拡張性**: 従来のキーワード検索では不可能な「意味の近さ」による関連記事抽出の基盤を提供します。

## ディレクトリ構成

* `bin/`: 実行用バッチファイル（Stepごとの実行を自動化）。
* `core/`: メインロジック（解析・学習・推論・標準化の各ステップ）。
* `utils/`: 共通ユーティリティ（テキストクレンジング、ID集約ロジック、スコア計算）。
* `models/`: 学習済みモデル（`.pkl`）および統計データ（`.json`, `.csv`）。
* `config/`: システム設定、DB接続情報、スコアリング閾値。

## 実行パイプライン

以下の順序で実行することで、ナレッジベースの知能化が完了します。

1. **`ga_def_term_weights.py`**: サイト全体の重要語重みを定義。
2. **`kc_step1_build_training_samples.py`**: 既存記事からAI用の教師データを生成。
3. **`kc_step2_train_classifier.py`**: AIモデル（回帰モデル）の学習。
4. **`kc_step3_ai_context_scorer.py`**: 全記事に対してAI＋統計による統合スコアリングを実行。
5. **`kc_step4_standardizer.py`**: スコアを偏差値（IQ 100基準）に変換。
6. **`mx_run_vectorizer.py`**: 記事のベクトル化を実行。

## 特徴的なロジック：KX構造への集約

`ut_mapping_resolver.py` により、詳細記事（子）の解析結果を自動的に親記事（俯瞰記事）のメタデータとして集約・保存する機能を備えています。これにより、複雑な階層構造を持つナレッジを効率的に管理できます。

### コミュニケーションについて
制作者は日本語を母国語としています。英語での問い合わせも翻訳ツールを介して対応可能ですが、日本語でいただけるとよりスムーズな回答が可能です。

> **Note:** 本ドキュメントは、内部コード構造を正確に反映するためAI（Gemini）の支援を受けて作成されました。